# üõ°Ô∏è H∆∞·ªõng d·∫´n t√≠ch h·ª£p Cloudflare cho Ph√≤ng kh√°m nha khoa

## üìã M·ª•c l·ª•c
1. [Gi·ªõi thi·ªáu Cloudflare](#gi·ªõi-thi·ªáu-cloudflare)
2. [L·ª£i √≠ch cho ph√≤ng kh√°m](#l·ª£i-√≠ch-cho-ph√≤ng-kh√°m)
3. [C·∫•u h√¨nh DNS](#c·∫•u-h√¨nh-dns)
4. [B·∫£o m·∫≠t SSL/TLS](#b·∫£o-m·∫≠t-ssltls)
5. [T·ªëi ∆∞u hi·ªáu su·∫•t](#t·ªëi-∆∞u-hi·ªáu-su·∫•t)
6. [B·∫£o v·ªá kh·ªèi t·∫•n c√¥ng](#b·∫£o-v·ªá-kh·ªèi-t·∫•n-c√¥ng)
7. [Monitoring v√† Analytics](#monitoring-v√†-analytics)
8. [Page Rules t·ªëi ∆∞u](#page-rules-t·ªëi-∆∞u)

## üåê Gi·ªõi thi·ªáu Cloudflare

Cloudflare l√† d·ªãch v·ª• CDN (Content Delivery Network) v√† b·∫£o m·∫≠t web h√†ng ƒë·∫ßu th·∫ø gi·ªõi, cung c·∫•p:
- ‚ö° CDN to√†n c·∫ßu v·ªõi 250+ data centers
- üõ°Ô∏è B·∫£o v·ªá DDoS mi·ªÖn ph√≠ kh√¥ng gi·ªõi h·∫°n
- üîí SSL/TLS certificate mi·ªÖn ph√≠
- üöÄ T·ªëi ∆∞u t·ªëc ƒë·ªô website
- ü§ñ Bot protection v√† WAF

## üíä L·ª£i √≠ch cho ph√≤ng kh√°m

### üè• Cho h·ªá th·ªëng y t·∫ø:
- **B·∫£o m·∫≠t d·ªØ li·ªáu b·ªánh nh√¢n**: SSL encryption + WAF
- **T·ªëc ƒë·ªô t·∫£i nhanh**: Quan tr·ªçng cho booking online
- **Uptime cao**: 99.99% availability cho h·ªá th·ªëng ƒë·∫∑t l·ªãch
- **B·∫£o v·ªá th√¥ng tin**: HIPAA compliance support

### üë• Cho b·ªánh nh√¢n:
- **Tr·∫£i nghi·ªám m∆∞·ª£t m√†**: Trang web t·∫£i nhanh
- **B·∫£o m·∫≠t th√¥ng tin**: D·ªØ li·ªáu c√° nh√¢n ƒë∆∞·ª£c b·∫£o v·ªá
- **Truy c·∫≠p ·ªïn ƒë·ªãnh**: Kh√¥ng b·ªã gi√°n ƒëo·∫°n khi ƒë·∫∑t l·ªãch

## üåç B∆∞·ªõc 1: C·∫•u h√¨nh DNS

### 1.1 ƒêƒÉng k√Ω Cloudflare
```bash
# Truy c·∫≠p: https://cloudflare.com
# T·∫°o t√†i kho·∫£n mi·ªÖn ph√≠
# Ch·ªçn Free Plan ($0/month)
```

### 1.2 Th√™m domain
```
Domain: phongkhamnhakhoa.com (thay b·∫±ng domain th·∫≠t)
Plan: Free ($0/month)
```

### 1.3 C·∫•u h√¨nh DNS Records
```dns
# A Records (Root domain)
Type: A
Name: @
IPv4: [IP_SERVER_TOMCAT]
Proxy: ‚úÖ (Orange cloud)

# CNAME Records (www)
Type: CNAME  
Name: www
Target: phongkhamnhakhoa.com
Proxy: ‚úÖ (Orange cloud)

# A Records (API subdomain)
Type: A
Name: api
IPv4: [IP_SERVER_TOMCAT]
Proxy: ‚úÖ (Orange cloud)

# A Records (Admin subdomain)
Type: A
Name: admin
IPv4: [IP_SERVER_TOMCAT]
Proxy: ‚úÖ (Orange cloud)
```

### 1.4 C·∫≠p nh·∫≠t Nameservers
Thay ƒë·ªïi nameservers t·∫°i nh√† cung c·∫•p domain:
```
Nameserver 1: xxx.ns.cloudflare.com
Nameserver 2: yyy.ns.cloudflare.com
```

## üîí B∆∞·ªõc 2: B·∫£o m·∫≠t SSL/TLS

### 2.1 SSL/TLS Settings
```yaml
SSL/TLS Mode: Full (Strict)
# ƒê·∫£m b·∫£o m√£ h√≥a end-to-end

Always Use HTTPS: ON
# T·ª± ƒë·ªông redirect HTTP ‚Üí HTTPS

Automatic HTTPS Rewrites: ON
# T·ª± ƒë·ªông s·ª≠a mixed content

Certificate Transparency Monitoring: ON
# Gi√°m s√°t certificate
```

### 2.2 Edge Certificates
```yaml
Universal SSL: ‚úÖ Active
# Certificate mi·ªÖn ph√≠ cho domain

HSTS (HTTP Strict Transport Security): ON
Max Age: 6 months
Include subdomains: ON
Preload: ON
```

### 2.3 Client Certificates (T√πy ch·ªçn cho admin)
```yaml
# Cho khu v·ª±c admin qu·∫£n l√Ω
Client Certificate Authentication: ON
# Ch·ªâ admin c√≥ certificate m·ªõi truy c·∫≠p ƒë∆∞·ª£c
```

## üöÄ B∆∞·ªõc 3: T·ªëi ∆∞u hi·ªáu su·∫•t

### 3.1 Caching Settings
```yaml
# Browser Cache TTL
Browser Cache TTL: 4 hours

# Development Mode
Development Mode: OFF
# Ch·ªâ b·∫≠t khi ƒëang ph√°t tri·ªÉn

# Purge Cache
# X√≥a cache khi update website
```

### 3.2 Page Rules cho t·ªëi ∆∞u
```yaml
# Static Assets Caching
URL: phongkhamnhakhoa.com/static/*
Settings:
  - Cache Level: Cache Everything
  - Edge Cache TTL: 1 month
  - Browser Cache TTL: 4 hours

# API No Cache
URL: phongkhamnhakhoa.com/api/*
Settings:
  - Cache Level: Bypass

# Admin Area Security
URL: phongkhamnhakhoa.com/admin/*
Settings:
  - Security Level: High
  - Cache Level: Bypass
```

### 3.3 Speed Optimizations
```yaml
# Auto Minify
Auto Minify:
  JavaScript: ON
  CSS: ON  
  HTML: ON

# Brotli Compression
Brotli: ON

# Early Hints
Early Hints: ON

# HTTP/2 & HTTP/3
HTTP/2: ON
HTTP/3 (with QUIC): ON
```

## üõ°Ô∏è B∆∞·ªõc 4: B·∫£o v·ªá kh·ªèi t·∫•n c√¥ng

### 4.1 Firewall Rules
```yaml
# Block malicious countries (t√πy ch·ªçn)
Rule 1:
  Field: Country
  Operator: equals
  Value: [COUNTRIES_TO_BLOCK]
  Action: Block

# Allow only specific countries for admin
Rule 2:
  Field: URI Path
  Operator: starts with
  Value: /admin
  AND Country not in: VN, US
  Action: Block

# Rate limiting for login
Rule 3:
  Field: URI Path
  Operator: equals
  Value: /login
  Rate: 5 requests per minute
  Action: Challenge
```

### 4.2 Bot Fight Mode
```yaml
Bot Fight Mode: ON
# T·ª± ƒë·ªông ch·∫∑n bot x·∫•u

Super Bot Fight Mode: ON (N·∫øu c√≥ Pro plan)
# Ch·ªëng bot n√¢ng cao
```

### 4.3 Security Level
```yaml
Security Level: Medium
# C√¢n b·∫±ng gi·ªØa b·∫£o m·∫≠t v√† tr·∫£i nghi·ªám

Under Attack Mode: OFF
# Ch·ªâ b·∫≠t khi b·ªã t·∫•n c√¥ng DDoS
```

### 4.4 WAF (Web Application Firewall)
```yaml
# OWASP Core Rule Set
OWASP: ON

# Custom Rules cho ph√≤ng kh√°m
Rule: Block SQL Injection attempts
Expression: (http.request.uri.query contains "union select")
Action: Block

Rule: Protect patient data endpoints
Expression: (http.request.uri.path contains "/patient-data")
Action: Managed Challenge
```

## üìä B∆∞·ªõc 5: Monitoring v√† Analytics

### 5.1 Analytics Dashboard
```yaml
Web Analytics: ON
# Theo d√µi traffic website

# Metrics quan tr·ªçng:
- Page views
- Unique visitors  
- Bounce rate
- Geographic distribution
- Device types
```

### 5.2 Security Analytics
```yaml
# Theo d√µi:
- Blocked threats
- DDoS attacks mitigated
- Bot traffic patterns
- Firewall events
```

### 5.3 Performance Analytics
```yaml
# Core Web Vitals:
- Largest Contentful Paint (LCP)
- First Input Delay (FID)
- Cumulative Layout Shift (CLS)

# Other metrics:
- Time to First Byte (TTFB)
- Load time by location
```

## üìã B∆∞·ªõc 6: Page Rules t·ªëi ∆∞u cho ph√≤ng kh√°m

### 6.1 Booking System Optimization
```yaml
Rule 1: Booking Pages
URL: phongkhamnhakhoa.com/booking/*
Settings:
  - Always Online: ON
  - Cache Level: Bypass
  - Security Level: Medium
```

### 6.2 Patient Portal Security  
```yaml
Rule 2: Patient Portal
URL: phongkhamnhakhoa.com/patient/*
Settings:
  - Security Level: High
  - Cache Level: Bypass
  - Browser Integrity Check: ON
```

### 6.3 Payment Security
```yaml
Rule 3: Payment Processing
URL: phongkhamnhakhoa.com/payment/*
Settings:
  - Security Level: High  
  - Cache Level: Bypass
  - Always Use HTTPS: ON
```

## ‚öôÔ∏è B∆∞·ªõc 7: C·∫•u h√¨nh n√¢ng cao

### 7.1 Workers (T√πy ch·ªçn - Paid plan)
```javascript
// Worker script cho rate limiting API
addEventListener('fetch', event => {
  event.respondWith(handleRequest(event.request))
})

async function handleRequest(request) {
  // Implement custom rate limiting
  // Protect API endpoints
  // Log security events
}
```

### 7.2 Load Balancing (Cho multiple servers)
```yaml
Load Balancer: phongkhamnhakhoa.com
Origins:
  - Server 1: [IP_1] (Primary)
  - Server 2: [IP_2] (Backup)
Health Checks: ON
Failover: Automatic
```

### 7.3 Argo Smart Routing (Paid)
```yaml
Argo Smart Routing: ON
# T·ªëi ∆∞u routing th√¥ng minh
# Gi·∫£m latency 30%
```

## üîß B∆∞·ªõc 8: C·∫•u h√¨nh cho Tomcat Server

### 8.1 C·∫≠p nh·∫≠t server.xml
```xml
<!-- Th√™m v√†o server.xml -->
<Connector port="8080" protocol="HTTP/1.1"
           connectionTimeout="20000"
           redirectPort="8443"
           secure="false"
           scheme="http"
           proxyPort="443"
           proxyName="phongkhamnhakhoa.com" />
```

### 8.2 C·∫•u h√¨nh SSL trong ·ª©ng d·ª•ng
```java
// Trong web.xml
<security-constraint>
    <web-resource-collection>
        <web-resource-name>All</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint>
```

## üì± B∆∞·ªõc 9: Mobile Optimization

### 9.1 Mobile Settings
```yaml
# Polish (Image Optimization)
Polish: Lossy
WebP: ON

# Mirage (Image optimization for mobile)
Mirage: ON

# Mobile Redirect (n·∫øu c√≥ mobile site ri√™ng)
Mobile Redirect: OFF (Single responsive design)
```

### 9.2 AMP Support (T√πy ch·ªçn)
```yaml
# N·∫øu c√≥ AMP pages
AMP Real URL: ON
```

## üö® B∆∞·ªõc 10: Incident Response

### 10.1 Under Attack Mode
```yaml
# Khi b·ªã t·∫•n c√¥ng DDoS
Under Attack Mode: ON
# Hi·ªÉn th·ªã interstitial page 5 gi√¢y
```

### 10.2 Emergency Settings
```yaml
# T·∫°m th·ªùi block traffic
Firewall Rule:
  Expression: (true)
  Action: Block
  
# Maintenance mode
Page Rule:
  URL: phongkhamnhakhoa.com/*
  Setting: 
    - Cache Level: Cache Everything
    - Edge Cache TTL: 2 hours
    - Browser Cache TTL: 0 seconds
```

## üìà B∆∞·ªõc 11: Monitoring v√† Alerts

### 11.1 Health Checks
```yaml
Health Check:
  URL: https://phongkhamnhakhoa.com/health
  Method: GET
  Expected Status: 200
  Check Interval: 60 seconds
```

### 11.2 Notifications
```yaml
# Email alerts cho:
- Website down
- SSL certificate expiring
- DDoS attacks
- High error rates
```

## üí∞ Chi ph√≠ d·ª± ki·∫øn

### Free Plan ($0/month):
- ‚úÖ CDN kh√¥ng gi·ªõi h·∫°n
- ‚úÖ DDoS protection 
- ‚úÖ SSL certificate
- ‚úÖ 3 Page Rules
- ‚úÖ Basic analytics

### Pro Plan ($20/month) - Khuy·∫øn ngh·ªã:
- ‚úÖ All Free features
- ‚úÖ 20 Page Rules
- ‚úÖ Advanced DDoS protection
- ‚úÖ WAF (Web Application Firewall)
- ‚úÖ Mobile optimization
- ‚úÖ Priority support

## üéØ K·∫øt lu·∫≠n

Cloudflare s·∫Ω mang l·∫°i cho ph√≤ng kh√°m nha khoa:

### üîí **B·∫£o m·∫≠t**: 
- SSL/TLS encryption
- DDoS protection
- WAF ch·ªëng hack
- Bot protection

### ‚ö° **Hi·ªáu su·∫•t**:
- CDN to√†n c·∫ßu
- Caching th√¥ng minh  
- Image optimization
- Mobile optimization

### üìä **Gi√°m s√°t**:
- Real-time analytics
- Security monitoring
- Performance metrics
- Health checks

### üíµ **Ti·∫øt ki·ªám**:
- Gi·∫£m bandwidth server
- TƒÉng uptime
- √çt maintenance
- Chi ph√≠ th·∫•p

---

## üöÄ B∆∞·ªõc ti·∫øp theo

1. **ƒêƒÉng k√Ω Cloudflare** v√† th√™m domain
2. **C·∫•u h√¨nh DNS** theo h∆∞·ªõng d·∫´n tr√™n
3. **B·∫≠t SSL/TLS Full (Strict)** 
4. **T·∫°o Page Rules** cho t·ª´ng khu v·ª±c
5. **B·∫≠t Firewall** v√† Bot Fight Mode
6. **Monitor** v√† ƒëi·ªÅu ch·ªânh theo th·ªùi gian

**L∆∞u √Ω**: Qu√° tr√¨nh propagation DNS c√≥ th·ªÉ m·∫•t 24-48 gi·ªù. H√£y ki√™n nh·∫´n v√† test t·ª´ t·ª´! 